/*!
 * Crox v2.0.0
 * https://github.com/thx/crox
 *
 * Released under the MIT license
 */

!function(root){var Crox=function(){function Class(t,n,r){function e(){}e.prototype=t.prototype;var u=new e;if(r)for(var i in r)u[i]=r[i];return n||(n=e),n.prototype=u,n}function Position(t,n){this.row=t,this.col=n}function getPos(t,n){var r=t.substring(0,n),e=r.match(/\r\n?|\n/g),u=1;return e&&(u+=e.length),new Position(u,1+/[^\r\n]*$/.exec(r)[0].length)}function Enum(t){for(var n={},r=0;r<t.length;++r)n[t[r]]=t[r];return n}function inArr(t,n){for(var r=0;r<t.length;++r)if(t[r]==n)return r;return-1}function inArr_strict(t,n){for(var r=0;r<t.length;++r)if(t[r]===n)return r;return-1}function nodup(t,n){n||(n=function(t,n){return t===n});for(var r=[],e=t.length,u=0;u<e;u++){for(var i=u+1;i<e;i++)n(t[u],t[i])&&(i=++u);r.push(t[u])}return r}function htmlEncode(t){return String(t).replace(/[&<>"]/g,function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return"&quot;"}})}function quote(t){return'"'+t.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(t){switch(t){case'"':return'\\"';case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t"}return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"'}function singleQuote(t){return"'"+t.replace(/[\x00-\x1f'\\\u2028\u2029]/g,function(t){switch(t){case"'":return"\\'";case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t"}return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})+"'"}function phpQuote(t){return"'"+String(t).replace(/['\\]/g,"\\$&")+"'"}function evalNum(t){return+t}function evalStr(s){return eval(s)}function encodeCommonName(t){return t.replace(/^_+/,"$&$&")}function createLexer(t){function g(t,n,r,e,u,i){this.tag=t,this.text=n,this.index=r,this.subMatches=e,this.end=u,this.pos=i}function o(){}function s(t){return"function"==typeof t?t:function(){return t}}function n(t){for(var n=1,r=[],e=[1],u=[],i=0;i<t.length;++i)e.push(n+=RegExp("|"+t[i][0].source).exec("").length),u.push(t[i][1]?s(t[i][1]):o),r.push("("+t[i][0].source+")");return[RegExp(r.join("|")+"|","g"),e,u]}g.prototype.toString=function(){return this.text};var d=t.$||"$",v={};for(var r in t)"$"!=r.charAt(0)&&(v[r]=n(t[r]));return function(s){var c=s.length,a=0,f=[""],l={text:"",index:0,source:s,pushState:function(t){f.push(t)},popState:function(){f.pop()},retract:function(t){a-=t}},p=new Position(1,1);function h(){var t=f[f.length-1],n=v[t],r=n[0];r.lastIndex=a;var e=r.exec(s);if(""==e[0]){if(a<c)throw Error("lexer error: "+p+"\n"+s.slice(a,a+50));return new g(d,"",a,null,a,p)}l.index=a,a=r.lastIndex;for(var u=n[1],i=0;i<u.length;++i)if(e[u[i]]){var o=n[2][i].apply(l,e.slice(u[i],u[i+1]));return new g(o,e[0],l.index,e.slice(u[i]+1,u[i+1]),a,p)}}var _=/\r\n?|\n/g;return{scan:function(){for(;;){var t=h(),n=p.row,r=p.col,e=t.text.match(_),u=e?e.length:0;if(n+=u,0==u)r+=t.text.length;else{for(var i,o=0,s=0,c=t.text.length;s<c;s++)"\r"!==(i=t.text.substr(s,1))&&"\n"!==i&&"\u2028"!==i&&"\u2029"!==i?o+=1:o=0;r=o+1}if(p=new Position(n,r),null!=t.tag)return t}},GetCurrentPosition:function(){return p},getPos:function(t){return getPos(s,t)}}}}Position.prototype.toString=function(){return"("+this.row+","+this.col+")"};var Lexer=(Qa=[[/\s+/],[/\/\/[^\r\n]*|\/\*[\s\S]*?\*\//],[/[A-Za-z_]\w*/,function(t){switch(t){case"true":case"false":return"boolean";case"set":case"include":case"null":return t;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+t+" ")||"null"==t)throw Error("Reserved: "+t+" "+getPos(this.source,this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(t){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(t){return"number"}],[/{(?!{)/,function(t){return"{"}],[/}(?!})/,function(t){return"}"}],[function(t){t.sort().reverse();for(var n=0;n<t.length;++n)t[n]=t[n].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(t.join("|"))}(["!","%","&&","(",")","*","+","-",".","/","<","<=","=",">",">=","[","]","||","===","!==","==","!=",",",":","?"]),function(t){return/[*/%]/.test(t)?"mul":/[<>]/.test(t)?"rel":/[!=]=/.test(t)?"eq":t}]],createLexer({"":[[/(?:(?!{{)[\s\S])+/,function(t){return"text"}],[/{{{/,function(t){return this.pushState(t),t}],[/{{(?:\/if|else|\/each|\/forin|\/raw)}}/,function(t){return t}],[/{{#raw}}/,function(t){return this.pushState("raw"),t}],[/{{<script>[\s\S]*?<\/script>}}/,function(t){return"script"}],[/{{\*[\s\S]*?\*}}/],[/{{(?!\*)(?:#(?:if|each|forin)(?=\s))?/,function(t){return this.pushState("{{"),t}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(t){return this.popState(),"rawtext"}]],"{{":Qa.concat([[/}}/,function(t){return this.popState(),t}]]),"{{{":Qa.concat([[/}}}/,function(t){return this.popState(),t}]])})),Qa,parse=(ib={nStart:43,tSymbols:["$","!","&&","(",")","+",",","-",".",":","=","?","[","]","boolean","eq","include","mul","null","number","rawtext","realId","rel","script","set","string","text","{","{{","{{#each","{{#forin","{{#if","{{#raw}}","{{/each}}","{{/forin}}","{{/if}}","{{/raw}}","{{else}}","{{{","||","}","}}","}}}","AdditiveExpression","ArrayLiteral","ConditionalExpression","ElementList","Elision","EqualityExpression","LogicalAndExpression","LogicalOrExpression","MemberExpression","MultiplicativeExpression","ObjectLiteral","PrimaryExpression","PropertyAssignment","PropertyNameAndValueList","RelationalExpression","UnaryExpression","_text","args","empty","expr","id","name","program","statement","statements","texts","program'"],actionList:[{_:-1},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,38:9,_:-32768},{_:-2},{26:11,32:12,_:-14},{_:-19},{1:38,3:34,7:39,12:36,14:33,16:29,18:35,19:32,21:31,24:28,25:30,27:37,_:0},{1:38,3:34,7:39,12:36,14:33,16:44,18:35,19:32,21:31,24:43,25:30,27:37,_:0},{_:-16},{_:-21},{20:46,_:0},{_:-20},{_:-29},{_:-47},{_:-31},{_:-32},{3:47,8:49,12:48,_:-54},{_:-57},{17:50,_:-59},{5:52,7:51,_:-62},{22:53,_:-64},{15:54,_:-66},{2:55,_:-68},{11:57,39:56,_:-70},{_:-72},{41:58,_:0},{_:-24},{_:-25},{_:-26},{_:-23},{_:-27},{_:-28},{_:-33},{6:64,13:63,_:-73},{16:29,21:31,24:28,25:69,40:70,_:0},{16:29,21:31,24:28,25:69,_:0},{41:75,_:0},{3:34,12:36,14:33,16:29,18:35,19:32,21:31,24:28,25:30,27:37,_:-24},{25:77,_:-25},{42:78,_:0},{36:79,_:0},{1:38,3:34,7:39,12:36,14:33,16:29,18:35,19:32,21:31,24:28,25:30,27:37,_:-73},{16:29,21:31,24:28,_:0},{_:-3},{4:94,_:0},{6:96,13:95,_:0},{1:38,3:34,6:98,7:39,12:36,14:33,16:29,18:35,19:32,21:31,24:28,25:30,27:37,_:0},{_:-34},{_:-40},{9:100,_:0},{_:-18},{6:101,40:102,_:0},{_:-44},{_:-17},{_:-42},{_:-55},{_:-56},{16:29,21:31,24:28,25:69,_:-73},{_:-12},{3:47,8:49,10:107,12:48,_:0},{41:108,_:0},{_:-13},{_:-22},{4:109,6:110,_:0},{_:-52},{4:111,_:0},{13:112,_:0},{_:-48},{_:-58},{17:50,_:-61},{17:50,_:-60},{5:52,7:51,_:-63},{22:53,_:-65},{15:54,_:-67},{2:55,_:-69},{9:113,_:0},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,35:115,37:116,38:9,_:0},{_:-30},{_:-35},{6:64,_:-73},{_:-36},{_:-41},{_:-37},{_:-43},{41:121,_:0},{41:122,_:0},{41:123,_:0},{41:124,_:0},{_:-15},{_:-50},{_:-51},{_:-49},{_:-4},{_:-5},{_:-3},{_:-46},{_:-45},{_:-3},{_:-3},{41:135,_:0},{_:-53},{_:-71},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,35:136,38:9,_:0},{_:-38},{_:-39},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,33:137,38:9,_:0},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,33:138,38:9,_:0},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,34:139,38:9,_:0},{23:10,26:11,28:8,29:6,30:7,31:5,32:12,34:140,38:9,_:0},{_:-11},{_:-6},{_:-7},{_:-8},{_:-9},{_:-10}],actionIndex:[0,1,2,3,4,5,5,5,6,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,5,31,32,33,5,5,34,34,35,36,37,38,39,40,5,41,5,5,5,5,5,5,5,5,42,43,44,45,5,46,47,48,49,50,51,52,53,54,55,56,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,5,34,82,83,84,85,86,5,87,88,5,89,90,5,91,92,93,45,5,94,95,96,96,97,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113],tGoto:[{65:1},{66:2,68:3,59:4},{},{59:13},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:27},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:40},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:41},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:42},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:45},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:59},{},{46:60,47:61,61:62},{64:65,63:66,56:67,55:68},{63:14,54:15,44:16,53:17,51:18,58:71},{63:14,54:15,44:16,53:17,51:18,58:72},{64:73,63:66},{64:74,63:66},{},{63:14,54:15,44:16,53:17,51:76},{},{},{},{63:14,54:15,44:16,53:17,51:18,60:80,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:81,61:82},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:83},{63:84},{63:14,54:15,44:16,53:17,51:18,58:85},{63:14,54:15,44:16,53:17,51:18,58:19,52:86},{63:14,54:15,44:16,53:17,51:18,58:19,52:87},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:88},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:89},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:90},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:91},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:92},{67:93},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:97},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:99},{},{},{},{},{},{},{},{},{},{},{64:103,63:66,61:104},{64:105,63:66,61:106},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{66:114,68:3,59:4},{},{},{47:117,61:118},{},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:119},{64:65,63:66,55:120},{},{},{},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:125},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:126},{},{},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:127},{},{},{67:128},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:129},{63:14,54:15,44:16,53:17,51:18,58:19,52:20,43:21,57:22,48:23,49:24,50:25,45:26,62:130},{},{},{67:131},{67:132},{67:133},{67:134},{},{},{},{66:114,68:3,59:4},{},{},{66:114,68:3,59:4},{66:114,68:3,59:4},{66:114,68:3,59:4},{66:114,68:3,59:4},{},{},{},{},{},{}],tRules:[[69,65],[65],[65,65,66],[67],[67,67,66],[66,31,62,41,67,35],[66,31,62,41,67,37,67,35],[66,29,62,64,64,41,67,33],[66,29,62,64,61,41,67,33],[66,30,62,64,64,41,67,34],[66,30,62,64,61,41,67,34],[66,28,24,51,10,62,41],[66,28,62,41],[66,38,62,42],[66,68],[66,28,16,25,41],[66,23],[64,25],[64,63],[68,59],[68,68,59],[59,26],[59,32,20,36],[63,21],[63,24],[63,16],[54,25],[54,19],[54,14],[54,63],[54,3,62,4],[54,44],[54,53],[54,18],[44,12,13],[44,12,46,13],[46,47,62],[46,61,62],[46,46,6,47,62],[46,46,6,61,62],[47,6],[47,47,6],[53,27,40],[53,27,56,40],[56,55],[56,56,6,55],[55,64,9,62],[51,54],[51,51,8,63],[51,51,12,62,13],[51,51,3,60,4],[51,51,3,61,4],[60,62],[60,60,6,62],[58,51],[58,1,58],[58,7,58],[52,58],[52,52,17,58],[43,52],[43,43,5,52],[43,43,7,52],[57,43],[57,57,22,43],[48,57],[48,48,15,57],[49,48],[49,49,2,48],[50,49],[50,50,39,49],[45,50],[45,50,11,45,9,45],[62,45],[61]],objCharset:null},function(t,n){for(var r=ib.nStart,e=ib.tSymbols,u={},i=0;i<e.length;++i)u[e[i]]=i;var o=ib.tAction||ib.actionList,s=ib.tGoto,c=ib.tRules,a=(ib.tCodes,ib.actionIndex);function f(t,n,r,e,u,i,o){return["each",n,i,e,r,!0]}function l(t,n,r,e,u,i,o){return["each",n,i,e,r,!1]}function p(t){return t.text}function h(t,n){var r;return(r=Array(t||0)).push(n),r}function _(t,n,r,e){var u;return r&&(t.length+=r),(u=t).push(e),u}function g(t){return[t]}function d(t,n,r,e){return["()",t,r]}function v(t,n,r){return[n.text,t,r]}var x=[,function(){return["prog",[],[]]},function(t,n){return t[1].push(n),t},function(){return[]},function(t,n){return t.push(n),t},function(t,n,r,e,u){return["if",n,e]},function(t,n,r,e,u,i,o){return["if",n,e,i]},f,f,l,l,function(t,n,r,e,u,i){return["set","id"==r[0]?r[1]:r,u]},function(t,n,r){return["eval",n,!1]},function(t,n,r){return["eval",n,!0]},function(t){return["text",t]},function(t,n,r,e){return["inc",evalStr(r.text)]},function(t){return["script",t.text.slice(10,-11)]},function(t){return evalStr(t.text)},p,function(t){return t},function(t,n){return t+n},p,function(t,n,r){return n.text},,,,function(t){return["lit",evalStr(t.text)]},function(t){return["lit",evalNum(t.text)]},function(t){return["lit","true"==t.text]},function(t){return["id",t.text]},function(t,n,r){return n},,,function(t){return["null"]},function(t,n){return["array",[]]},function(t,n,r){return["array",n]},h,h,_,_,function(t){return 1},function(t,n){return t+1},function(t,n){return["object",[]]},function(t,n,r){return["object",n]},g,function(t,n,r){return t.push(r),t},function(t,n,r){return["init",t,r]},,function(t,n,r){return[".",t,r.text]},function(t,n,r,e){return["[]",t,r]},d,d,g,function(t,n,r){var e;return(e=t).push(r),e},,function(t,n){return["!",n]},function(t,n){return["u-",n]},,v,,v,v,,v,,v,,v,,v,,function(t,n,r,e,u){return["cond",t,r,u]}];function m(t,n){return o[t][n]}function b(){return t.scan()}o.length,a&&(m=function(t,n){var r=o[a[t]];return r[n]||r._},a.length);var w=0,y=[0],S=b(),E=[],A={get:function(t){return E[E.length+t]},set:function(t,n){E[E.length+t]=n}};if(n)for(var i in n)A[i]=n[i];for(var C=E;;){C.length;var L=m(w,u[S.tag]);if(!L)break;if(0<L)y.push(w=L),E.push(S),S=b();else{if(!(L<0&&-32768<L)){if(S.tag!=e[0])break;return E[0]}var j=-L,k=c[j],q=k.length-1;if(y.length-=q,w=s[y[y.length-1]][k[0]],y.push(w),x[j]){var $=x[j].apply(A,E.splice(E.length-q,q));E.push($)}else 1!=q&&E.splice(E.length-q,q,null)}}for(var P=[],M=0;M<r;++M)m(w,M)&&P.push(e[M]);throw Error("Syntax error: "+S.pos+"\nfind "+S.tag+"\nexpect "+P.join(" "))}),ib;function isAtom(t){switch(t){case"id":case"lit":case"t":return!0}return!1}function isMember(t){return isAtom(t)||"."==t||"[]"==t}function isUnary(t){return isMember(t)||"!"==t||"u-"==t}function isMul(t){if(isUnary(t))return!0;switch(t){case"*":case"/":case"%":return!0}return!1}function isAdd(t){if(isMul(t))return!0;switch(t){case"+":case"-":return!0}return!1}function isRel(t){if(isAdd(t))return!0;switch(t){case"<":case">":case"<=":case">=":return!0}return!1}function isEquality(t){if(isRel(t))return!0;switch(t){case"eq":case"ne":return!0}return!1}function isLogicalAnd(t){return isEquality(t)||"&&"==t}function isLogicalOr(t){return isLogicalAnd(t)||"||"==t}function changeExt(t,n){return t.replace(/\.\w+$/,"."+n)}function isCond(t){return isLogicalOr(t)||"cond"==t}function codegen_js_tran(t,o,s,c){var n=0;function a(){return"_"+n++}function f(t){e.push(t)}function l(t,n){return t.pos=n,t}function r(t){switch(t[0]){case"if":f("if("),f(_(t[1])),f("){"),p(t[2]),f("}"),t[3]&&(f("else{"),p(t[3]),f("}"));break;case"each":var n=t[3]?encodeCommonName(t[3]):a(),r=h(u=_(t[1]));if(/^\w+$/.test(r))var e=r;else f("var "+(e=a())+" = "),f(u),f(";");t[5]?(f("for(var "+n+"=0;"+n+"<"),f(_([".",l(["t",e],t[1].pos),"length"])),f(";"+n+"++){")):f("for(var "+n+" in "+e+") {"),f("var "+t[4]+" = "),f(_(["[]",l(["t",e],t[1].pos),["t",n]])),f(";"),p(t[2]),f("}");break;case"set":"string"==typeof t[1]?f("var "+encodeCommonName(t[1])+"="):(f(_(t[1])),f("=")),f(_(t[2])),f(";");break;case"eval":var u;r=h(u=_(t[1]));if(/^\w+$/.test(r))var i=r;else i="_t",f("_t = "),f(u),f(";");f("if("+i+" !=null)_s += "+((s?!t[2]:t[2])?o+"("+i+")":i)+";");break;case"text":if(c&&/^\s+$/.test(t[1]))break;f("_s += "+quote(t[1])+";");break;case"inc":break;case"script":g.push(t[1]);break;default:throw Error("unknown stmt: "+t[0])}}function p(t){for(var n=0;n<t.length;++n)r(t[n])}function h(t){if("string"==typeof t)return t;if(t instanceof Array){for(var n=[],r=0;r<t.length;++r)n.push(h(t[r]));return n.join("")}throw new Error("unknown type")}function u(t,n){var r=_(t);return n&&!n(t[0])&&(r=["(",r,")"]),r}function _(t){return l(function(t){switch(t[0]){case"t":return t[1];case"id":return encodeCommonName(t[1]);case"lit":return"string"==typeof t[1]?quote(t[1]):String(t[1]);case"array":for(var n=["["],r=0;r<t[1].length;++r)0<r&&n.push(","),n.push(_(t[1][r]));return n.push("]"),n;case"object":for(var n=["{"],r=0;r<t[1].length;++r)0<r&&n.push(","),n.push(quote(t[1][r][1])),n.push(":"),n.push(_(t[1][r][2]));return n.push("}"),n;case"null":return["null"];case".":return[u(t[1],isMember),".",t[2]];case"[]":return[u(t[1],isMember),"[",_(t[2]),"]"];case"()":var e=[u(t[1],isMember),"("];if(t[2])for(var r=0;r<t[2].length;++r)0<r&&e.push(","),e.push(_(t[2][r]));return e.push(")"),e;case"!":return["!",u(t[1],isUnary)];case"u-":return["- ",u(t[1],isUnary)];case"*":case"/":case"%":return[u(t[1],isMul),t[0],u(t[2],isUnary)];case"+":case"-":return[u(t[1],isAdd),t[0]," ",u(t[2],isMul)];case"<":case">":case"<=":case">=":return[u(t[1],isRel),t[0],u(t[2],isAdd)];case"==":case"!=":case"===":case"!==":return[u(t[1],isEquality),t[0],u(t[2],isRel)];case"&&":return[u(t[1],isLogicalAnd),"&&",u(t[2],isEquality)];case"||":return[u(t[1],isLogicalOr),"||",u(t[2],isLogicalAnd)];case"cond":return[u(t[1],isLogicalOr),"?",u(t[2],isCond),":",u(t[3],isCond)];default:throw Error("unknown expr: "+t[0])}}(t),t.pos)}var e=[],g=[];p(t[1]);var i=[],d="";!function t(n){if("string"==typeof n&&(d+=n),n instanceof Array){n.pos&&i.push([d.length,n.pos]);for(var r=0;r<n.length;++r)t(n[r])}}(e),g.length&&(d+=g.join(";"));var v=new String(d);return v.posLog=i,v}function parsetmpl(t){return parse(Lexer(t))}function compile2jsfn(t,n){var r,e=parsetmpl(t);n&&(r=n.htmlEncode),t=codegen_js_tran(e,r||"_htmlEncode",!0,!(!n||!n.ignoreWhitespace));var u="";if(r||(u="var _obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\tfunction _htmlEncode(s) {\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\t\t\treturn _obj[c];\t\t});\t}"),u+="var _t,_s = '';",n&&n.debug){var i=t.posLog;u+="try{\n",u+="eval("+JSON.stringify(t)+");",u+="}catch(_e){throw "+function(t,n){for(var r,e=t.stack,u=e.split(/\r\n?|\n/),i=+/:(\d+):(\d+)\)$/m.exec(u[1])[2],o=null,s=0;s<n.length;++s)if(n[s][0]+1>=i){o=n[s][1];break}return Error("CroxError: "+("("+(r=o.pos).row+","+r.col+")")+"\n"+e)}+"(_e,"+JSON.stringify(i)+");}"}else u+=t;return u+="return _s;",Function("root",u)}var Crox={parse:parsetmpl,compile:compile2jsfn,render:function(t,n){return compile2jsfn(t)(n)},version:"2.0.0"};return Crox}();"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=Crox:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return Crox}):"undefined"!=typeof KISSY&&KISSY.add(function(){return Crox}),root&&(root.Crox=Crox)}(this);